<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{getStr data["judul"]}} - Kelas Belaja Ngaji Online</title>
    <meta name="description" content="{{getStr data["deskripsi"]}}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/src/js/auth.js"></script>
    <script src="/src/js/kelasPage.js"></script>
    <script src="/src/js/global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7fa;
        }
        
        .islamic-pattern {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2UwZjBmMCI+PC9yZWN0PjwvcGF0dGVybj48L2RlZnM+PHJlY3QgZmlsbD0idXJsKCNwYXR0ZXJuKSIgaGVpZ2h0PSIxMDAlIiB3aWR0aD0iMTAwJSI+PC9yZWN0Pjwvc3ZnPg==');
        }
        
        .meeting-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 100, 0, 0.1);
        }
        
        .teacher-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 100, 0, 0.15);
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 100, 0, 0.15);
        }
        
        .islamic-border {
            border-bottom: 3px solid #2e8b57;
            position: relative;
        }
        
        .islamic-border:after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 2px;
            background: repeating-linear-gradient(90deg, #2e8b57, #2e8b57 10px, transparent 10px, transparent 20px);
        }
    </style>
</head>
<body x-data="{auth: false}" class="bg-gray-50">
    <!-- Header Section -->
    <div x-data="{ html:'' }"
       x-init="fetch('/src/assets/assets-pages/navbar-ngaji.html').then(r=>r.text()).then(t=>html=t)"
       x-html="html">
    </div>
    <div id="loading" class="flex" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: white; align-items: center; justify-content: center; z-index: 9999;"><div style="border: 4px solid #f3f3f3; border-top: 4px solid #2e8b57; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite;"></div><style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style></div>
    <!-- Loading -->
    <!-- <div id="loading" class="flex" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: white; align-items: center; justify-content: center; z-index: 9999;"><div style="border: 4px solid #f3f3f3; border-top: 4px solid #2e8b57; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite;"></div><style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style></div> -->

    <!-- Hero Section -->
    <section class="mt-12 bg-gradient-to-r from-green-50 to-white py-12 islamic-pattern">
        <div class="container mx-auto px-4" x-data="{a: false}">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-8 md:mb-0">
                    <h2 class="text-4xl md:text-5xl font-bold text-green-800 mb-4">{{getStr data["judul"]}}</h2>
                    <p class="text-lg text-gray-600 mb-6">{{getStr data["deskripsi"]}}</p>
                    <div class="flex space-x-4" x-init="a = await is_user_registred('{{getStr data["id_kelas"]}}')">
                        <button class="border-2 border-green-600 text-green-600 hover:bg-green-50 px-6 py-3 rounded-lg font-medium transition duration-300">
                            <i class="fas fa-book-open mr-2"></i> Liat Pertemuan
                        </button>
                        <button x-show="!a" x-transition @click="daftar_kelas('{{getStr data["id_kelas"]}}')" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition duration-300">
                            <i class="fas fa-user-graduate mr-2"></i> Daftar
                        </button>
                    </div>
                </div>
                <div class="md:w-1/2 flex justify-center">
                    <img src="https://images.unsplash.com/photo-1564121211835-e88c852648ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
                         alt="Islamic Learning" 
                         class="rounded-lg shadow-xl w-full max-w-md border-4 border-white">
                </div>
            </div>
        </div>
    </section>

    <!-- Course Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-green-800 mb-4 islamic-border inline-block pb-2">Ayo bersedekah</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">"Barangsiapa yang memberi pinjaman kepada Allah dengan pinjaman yang baik, maka Allah akan melipatgandakan balasan pinjaman itu untuknya dan dia akan memperoleh pahala yang mulia." (QS. Al-Hadid: 11)</p>
            </div>
            
            <!-- Course Card -->
            <div x-data="{donasi : fetch_donasi(), sukam : false}" class="max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden mb-12 course-card transition duration-300">
                <div class="md:flex">
                    <div class="md:w-1/3">
                        <img class="h-full w-full object-cover" x-bind:src="'/static/' + (await donasi).data.gambar" alt="Quran Course">
                    </div>
                    <div class="p-8 md:w-2/3" x-init="sukam = fetch_donasi_inspect((await donasi).data.id_program_donasi)">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <div class="uppercase tracking-wide text-sm text-green-600 font-semibold">Palestina</div>
                                <h3 class="mt-1 text-2xl font-bold text-gray-900" x-text="(await donasi).data.nama_program"></h3>
                            </div>
                        </div>
                        
                        <p class="mt-2 text-gray-600" x-text="(await donasi).data.deskripsi">A comprehensive course covering proper Quran recitation rules (Tajweed) and memorization techniques with practical exercises.</p>
                        <div class="mt-6" x-show="(await sukam).data" x-transition>
                            <div class="w-full flex justify-between">
                                <h1 class="text-black" x-text="cetak_rupiah((await sukam).data.terkumpul)"></h1>
                                <h1 class="text-black" x-text="cetak_rupiah((await donasi).data.target_donasi)"></h1>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
                                <div class="bg-green-600 h-2.5 rounded-full" x-bind:style="'width:' + hitung_persen((await sukam).data.terkumpul, (await donasi).data.target_donasi) + '%;'"></div>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <button @click="window.location.href = '/donasi/' + (await donasi).data.slug" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition duration-300">
                                <i class="fas fa-book-reader mr-2"></i> Sedekah Sekarang
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Teacher Section -->
            <div class="max-w-4xl mx-auto bg-green-50 rounded-xl p-6 mb-12">
                <h3 class="text-xl font-bold text-green-800 mb-4 flex items-center">
                    <i class="fas fa-chalkboard-teacher mr-2"></i> Tentang Mentor
                </h3>
                
                <div class="bg-white rounded-lg shadow-md p-6 teacher-card transition duration-300">
                    <div class="flex flex-col md:flex-row items-center">
                        <img class="h-24 w-24 rounded-full border-4 border-green-100" src='{{getStr data["pengguna"]["foto_url"]}}' alt="Teacher">
                        <div class="md:ml-6 mt-4 md:mt-0 text-center md:text-left">
                            <h4 class="text-xl font-bold text-gray-900">{{getStr data["pengguna"]["nama_lengkap"]}}</h4>
                            <p class="text-green-600 font-medium">Quran Specialist</p>
                            <p class="text-gray-600 mt-2">Lorem ipsum dolor sit amet consectetur adipisicing elit. Veritatis, explicabo!</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Meetings Section -->
            <div class="max-w-4xl mx-auto bg-green-50 rounded-xl p-6">
                <h3 class="text-xl font-bold text-green-800 mb-4 flex items-center">
                    <i class="fas fa-calendar-check mr-2"></i> Pertemuan
                </h3>
                
                <div class="space-y-4">
                    <!-- Meeting 1 -->
                    <template x-for="pertemuan in (await fetch_pertemuan('{{getStr data["id_kelas"]}}')).data">
                        <div class="bg-white rounded-lg shadow-md p-4 meeting-item transition duration-300">
                            <div class="flex items-start">
                                <div class="bg-green-100 text-green-800 rounded-full p-3 mr-4">
                                    <i class="fas fa-play-circle text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-gray-900" x-text="pertemuan.judul"></h4>
                                    <p class="text-gray-600 text-sm" x-text="pertemuan.deskripsi"></p>
                                </div>
                                <button @click="window.location.href = '/p/' + pertemuan.id_pertemuan_kelas" class="ml-4 bg-green-600 hover:bg-green-700 text-white py-1 px-3 rounded-lg text-sm font-medium transition duration-300">
                                    Join
                                </button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
  <div x-data="{ html:'' }"
       x-init="fetch('/src/assets/assets-pages/footer-ngaji.html').then(r=>r.text()).then(t=>html=t)"
       x-html="html">
  </div>

    <script>
        // Simple script for mobile menu toggle (can be expanded)
        document.querySelector('button.md\\:hidden').addEventListener('click', function() {
            const nav = document.querySelector('nav.hidden');
            if (nav) {
                nav.classList.toggle('hidden');
                nav.classList.toggle('flex');
                nav.classList.toggle('flex-col');
                nav.classList.toggle('absolute');
                nav.classList.toggle('top-16');
                nav.classList.toggle('right-4');
                nav.classList.toggle('bg-white');
                nav.classList.toggle('p-4');
                nav.classList.toggle('rounded-lg');
                nav.classList.toggle('shadow-lg');
            }
        });
    </script>
</body>
</html>